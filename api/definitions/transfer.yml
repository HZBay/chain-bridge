# ChainBridge Transfer Related Models

TransferRequest:
  type: "object"
  required:
    - "from_user_id"
    - "to_address"
    - "chain_id"
    - "asset_type"
    - "amount"
  properties:
    from_user_id:
      type: "string"
      format: "uuid"
      description: "Source user ID"
      example: "550e8400-e29b-41d4-a716-446655440000"
    to_address:
      type: "string"
      pattern: "^0x[a-fA-F0-9]{40}$"
      description: "Destination address"
      example: "0x1234567890123456789012345678901234567890"
    chain_id:
      type: "integer"
      format: "int64"
      description: "Blockchain network ID"
      example: 1
      enum: [1, 56, 137, 42161]
    asset_type:
      type: "string"
      description: "Type of asset to transfer"
      example: "ERC20"
      enum: ["ETH", "ERC20", "CPOP", "NFT"]
    contract_address:
      type: "string"
      pattern: "^0x[a-fA-F0-9]{40}$"
      description: "Contract address (required for ERC20 and NFT)"
      example: "0xdAC17F958D2ee523a2206206994597C13D831ec7"
    amount:
      type: "string"
      pattern: "^[0-9]+\\.?[0-9]*$"
      description: "Amount to transfer (in token units)"
      example: "100.500000"
    memo:
      type: "string"
      maxLength: 256
      description: "Optional memo for the transfer"
      example: "Payment for services"
    gas_mode:
      type: "string"
      description: "Gas payment mode"
      example: "sponsored"
      enum: ["sponsored", "self"]
      default: "sponsored"
    priority:
      type: "string"
      description: "Transaction priority"
      example: "normal"
      enum: ["low", "normal", "high"]
      default: "normal"

TransferResponse:
  type: "object"
  required:
    - "transaction_id"
    - "status"
    - "estimated_confirmation"
  properties:
    transaction_id:
      type: "string"
      format: "uuid"
      description: "Unique transaction identifier"
      example: "tx_550e8400-e29b-41d4-a716-446655440000"
    status:
      type: "string"
      description: "Current transaction status"
      example: "pending"
      enum: ["pending", "submitted", "confirmed", "failed"]
    estimated_confirmation:
      type: "integer"
      description: "Estimated confirmation time in seconds"
      example: 45
    gas_fee_usd:
      type: "number"
      format: "float"
      description: "Estimated gas fee in USD"
      example: 2.50
    from_address:
      type: "string"
      pattern: "^0x[a-fA-F0-9]{40}$"
      description: "Source address"
    to_address:
      type: "string"
      pattern: "^0x[a-fA-F0-9]{40}$"
      description: "Destination address"
    explorer_url:
      type: "string"
      format: "uri"
      description: "Blockchain explorer URL (available after submission)"
    batch_info:
      $ref: "#/definitions/BatchInfo"

BatchInfo:
  type: "object"
  properties:
    will_be_batched:
      type: "boolean"
      description: "Whether this transaction will be batched"
      example: true
    estimated_batch_time:
      type: "integer"
      description: "Estimated time until batch processing in seconds"
      example: 15
    current_batch_size:
      type: "integer"
      description: "Current number of operations in the batch"
      example: 23

TransferP2PRequest:
  type: "object"
  required:
    - "from_user_id"
    - "to_user_id"
    - "chain_id"
    - "asset_type"
    - "amount"
  properties:
    from_user_id:
      type: "string"
      format: "uuid"
      description: "Source user ID"
    to_user_id:
      type: "string"
      format: "uuid"
      description: "Destination user ID"
    chain_id:
      type: "integer"
      format: "int64"
      description: "Blockchain network ID"
    asset_type:
      type: "string"
      enum: ["ETH", "ERC20", "CPOP", "NFT"]
    contract_address:
      type: "string"
      pattern: "^0x[a-fA-F0-9]{40}$"
      description: "Contract address (required for ERC20)"
    amount:
      type: "string"
      pattern: "^[0-9]+\\.?[0-9]*$"
      description: "Amount to transfer"
    memo:
      type: "string"
      maxLength: 256
      description: "Optional memo"

TransferBatchRequest:
  type: "object"
  required:
    - "from_user_id"
    - "transfers"
  properties:
    from_user_id:
      type: "string"
      format: "uuid"
      description: "Source user ID for all transfers"
    transfers:
      type: "array"
      minItems: 1
      maxItems: 100
      items:
        $ref: "#/definitions/BatchTransferItem"
    gas_mode:
      type: "string"
      enum: ["sponsored", "self"]
      default: "sponsored"

BatchTransferItem:
  type: "object"
  required:
    - "chain_id"
    - "asset_type"
    - "amount"
  properties:
    to_address:
      type: "string"
      pattern: "^0x[a-fA-F0-9]{40}$"
      description: "Destination address (use this OR to_user_id)"
    to_user_id:
      type: "string"
      format: "uuid"
      description: "Destination user ID (use this OR to_address)"
    chain_id:
      type: "integer"
      format: "int64"
    asset_type:
      type: "string"
      enum: ["ETH", "ERC20", "CPOP", "NFT"]
    contract_address:
      type: "string"
      pattern: "^0x[a-fA-F0-9]{40}$"
    amount:
      type: "string"
      pattern: "^[0-9]+\\.?[0-9]*$"
    memo:
      type: "string"
      maxLength: 256

TransferBatchResponse:
  type: "object"
  required:
    - "batch_id"
    - "transactions"
  properties:
    batch_id:
      type: "string"
      format: "uuid"
      description: "Batch identifier"
    transactions:
      type: "array"
      items:
        $ref: "#/definitions/TransferResponse"
    total_gas_fee_usd:
      type: "number"
      format: "float"
      description: "Total estimated gas fee for all transfers"